<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë¯¸íŒTicket - ê³ ê° í™”ë©´ í”„ë¡œí† íƒ€ì…</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800;900&family=Noto+Sans+KR:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --navy: #1428A0;
    --navy-dark: #0d1670;
    --gold: #F5B731;
    --gold-light: #fef9e7;
    --success: #16A34A;
    --success-bg: #dcfce7;
    --warning: #EA580C;
    --warning-bg: #fff7ed;
    --error: #DC2626;
    --error-bg: #fee2e2;
    --gray: #94a3b8;
    --gray-bg: #f1f5f9;
  }
  * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
  body {
    font-family: 'Noto Sans KR', sans-serif;
    background: #e8ecf4;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 24px 16px 40px;
  }

  /* ë°ëª¨ ì»¨íŠ¸ë¡¤ ë°” */
  .demo-bar {
    width: 100%;
    max-width: 420px;
    background: #1a1d2b;
    border-radius: 14px;
    padding: 14px 16px;
    margin-bottom: 16px;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .demo-label {
    font-family: 'Outfit', sans-serif;
    font-size: 11px;
    font-weight: 700;
    color: #64748b;
    letter-spacing: 1.5px;
    text-transform: uppercase;
  }
  .demo-states {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
  }
  .state-btn {
    padding: 6px 12px;
    border-radius: 8px;
    border: none;
    font-size: 12px;
    font-weight: 600;
    font-family: 'Noto Sans KR', sans-serif;
    cursor: pointer;
    background: #2d3147;
    color: #94a3b8;
    transition: all 0.2s;
  }
  .state-btn.active { background: var(--navy); color: #fff; }
  .state-btn:hover:not(.active) { background: #3d4160; color: #e2e8f0; }

  /* ëª¨ë°”ì¼ í° í”„ë ˆì„ */
  .phone-frame {
    width: 100%;
    max-width: 390px;
    background: #0f172a;
    border-radius: 44px;
    padding: 12px;
    box-shadow: 0 32px 64px rgba(0,0,0,0.35), 0 0 0 1px rgba(255,255,255,0.06);
  }
  .phone-screen {
    background: #f8fafc;
    border-radius: 34px;
    overflow: hidden;
    min-height: 780px;
    position: relative;
  }
  .phone-notch {
    height: 44px;
    background: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .notch-pill { width: 120px; height: 32px; background: #0f172a; border-radius: 20px; }

  /* ì•± ë‚´ìš© */
  .app-content { overflow-y: auto; max-height: 736px; }

  /* í—¤ë” */
  .ticket-header {
    background: var(--navy);
    padding: 16px 20px 20px;
    position: relative;
    overflow: hidden;
  }
  .ticket-header::before {
    content: '';
    position: absolute;
    top: -40px; right: -40px;
    width: 140px; height: 140px;
    background: rgba(255,255,255,0.04);
    border-radius: 50%;
  }
  .ticket-header::after {
    content: '';
    position: absolute;
    bottom: -20px; left: -20px;
    width: 100px; height: 100px;
    background: rgba(245,183,49,0.06);
    border-radius: 50%;
  }
  .header-logo {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 18px;
    position: relative; z-index: 1;
  }
  .logo-mark {
    width: 36px; height: 36px;
    background: rgba(255,255,255,0.12);
    border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    position: relative;
  }
  .logo-mark-p { font-family: 'Outfit', sans-serif; font-size: 18px; font-weight: 900; color: #fff; line-height: 1; margin-top: -2px; }
  .logo-mark-bar { position: absolute; bottom: 5px; left: 50%; transform: translateX(-50%); width: 14px; height: 3px; background: var(--gold); border-radius: 2px; }
  .logo-text { display: flex; align-items: baseline; gap: 2px; }
  .logo-mipak { font-family: 'Noto Sans KR', sans-serif; font-size: 16px; font-weight: 800; color: #fff; }
  .logo-ticket-text { font-family: 'Outfit', sans-serif; font-size: 14px; font-weight: 700; color: var(--gold); }

  .header-store {
    position: relative; z-index: 1;
  }
  .store-name-label { font-size: 12px; color: rgba(255,255,255,0.6); margin-bottom: 4px; display: flex; align-items: center; gap: 4px; }
  .store-name-text { font-size: 20px; font-weight: 800; color: #fff; margin-bottom: 6px; }
  .plate-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: rgba(255,255,255,0.12);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 8px;
    padding: 6px 12px;
    backdrop-filter: blur(10px);
  }
  .plate-icon { font-size: 14px; }
  .plate-number { font-family: 'Outfit', sans-serif; font-size: 16px; font-weight: 800; color: #fff; letter-spacing: 1px; }

  /* ìƒíƒœ ë°°ë„ˆ */
  .status-banner {
    margin: 0 16px;
    border-radius: 12px;
    padding: 12px 16px;
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: -1px;
    transition: all 0.4s;
  }
  .status-icon { font-size: 20px; flex-shrink: 0; }
  .status-text { font-size: 14px; font-weight: 700; }
  .status-sub { font-size: 12px; opacity: 0.8; margin-top: 1px; }

  /* ë©”ì¸ ì¹´ë“œ */
  .main-card {
    margin: 12px 16px;
    background: #fff;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 2px 12px rgba(0,0,0,0.06);
    border: 1px solid #e2e8f0;
  }
  .card-header {
    padding: 14px 18px;
    border-bottom: 1px solid #f1f5f9;
    font-size: 13px;
    font-weight: 700;
    color: #64748b;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .timer-display {
    padding: 20px 18px;
    text-align: center;
    border-bottom: 1px solid #f1f5f9;
  }
  .timer-label { font-size: 12px; color: #94a3b8; margin-bottom: 6px; }
  .timer-value {
    font-family: 'Outfit', sans-serif;
    font-size: 44px;
    font-weight: 800;
    color: var(--navy);
    letter-spacing: -1px;
    line-height: 1;
  }
  .timer-value.pre-paid { color: var(--success); }
  .timer-value.overtime { color: var(--error); animation: pulse-red 1s infinite; }
  @keyframes pulse-red { 0%,100% { opacity:1; } 50% { opacity:0.6; } }

  .fee-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 18px;
    border-bottom: 1px solid #f8fafc;
  }
  .fee-label { font-size: 13px; color: #64748b; font-weight: 500; }
  .fee-value { font-family: 'Outfit', sans-serif; font-size: 18px; font-weight: 800; color: #1e293b; }
  .fee-value.highlight { color: var(--navy); }
  .fee-note { font-size: 11px; color: #94a3b8; margin-top: 2px; text-align: right; }

  /* ë°©ë¬¸ì§€ í• ì¸ */
  .visit-discount {
    margin: 0 16px 12px;
    background: var(--gold-light);
    border: 1px solid #fde68a;
    border-radius: 12px;
    padding: 12px 14px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .visit-icon { font-size: 18px; flex-shrink: 0; }
  .visit-info { flex: 1; min-width: 0; }
  .visit-name { font-size: 13px; font-weight: 700; color: #92400e; }
  .visit-detail { font-size: 11px; color: #b45309; margin-top: 2px; }

  /* ë²„íŠ¼ë“¤ */
  .actions { padding: 0 16px; display: flex; flex-direction: column; gap: 10px; margin-bottom: 12px; }
  .btn-primary {
    width: 100%;
    padding: 16px;
    border-radius: 14px;
    border: none;
    font-size: 16px;
    font-weight: 700;
    font-family: 'Noto Sans KR', sans-serif;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.2s;
    position: relative;
    overflow: hidden;
  }
  .btn-pay {
    background: var(--navy);
    color: #fff;
    box-shadow: 0 4px 14px rgba(20,40,160,0.35);
  }
  .btn-pay:active { transform: scale(0.98); }
  .btn-pay-badge {
    position: absolute;
    top: 8px; right: 12px;
    background: var(--gold);
    color: #1a1d2b;
    font-size: 9px;
    font-weight: 800;
    padding: 2px 6px;
    border-radius: 4px;
    letter-spacing: 0.5px;
  }
  .btn-exit {
    background: #fff;
    color: var(--navy);
    border: 2px solid var(--navy);
  }
  .btn-exit:active { background: #f0f4ff; }
  .btn-notify {
    background: #f8fafc;
    color: #475569;
    border: 1px solid #e2e8f0;
    font-size: 14px;
  }
  .btn-disabled {
    background: #f1f5f9;
    color: #94a3b8;
    cursor: default;
  }
  .btn-success {
    background: var(--success);
    color: #fff;
    box-shadow: 0 4px 14px rgba(22,163,74,0.35);
  }

  /* 30ë¶„ ì¹´ìš´íŠ¸ë‹¤ìš´ */
  .countdown-box {
    margin: 0 16px 12px;
    background: var(--success-bg);
    border: 1px solid #bbf7d0;
    border-radius: 12px;
    padding: 14px 16px;
    text-align: center;
  }
  .countdown-label { font-size: 12px; color: var(--success); font-weight: 600; margin-bottom: 6px; }
  .countdown-timer {
    font-family: 'Outfit', sans-serif;
    font-size: 28px;
    font-weight: 800;
    color: var(--success);
    letter-spacing: -0.5px;
  }
  .countdown-timer.urgent { color: var(--error); animation: pulse-red 1s infinite; }
  .countdown-sub { font-size: 11px; color: #4ade80; margin-top: 4px; }

  /* ì¶œì°¨ìš”ì²­ ì§„í–‰ ìƒíƒœ */
  .exit-progress {
    margin: 0 16px 12px;
    background: #fff;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 2px 12px rgba(0,0,0,0.06);
    border: 1px solid #e2e8f0;
  }
  .exit-step {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 16px;
    border-bottom: 1px solid #f1f5f9;
  }
  .exit-step:last-child { border-bottom: none; }
  .step-dot {
    width: 28px; height: 28px;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 13px;
    font-weight: 700;
    flex-shrink: 0;
  }
  .step-dot.done { background: var(--success-bg); color: var(--success); }
  .step-dot.active { background: var(--gold-light); color: var(--warning); animation: pulse-gold 1.5s infinite; }
  .step-dot.pending { background: #f1f5f9; color: #94a3b8; }
  @keyframes pulse-gold { 0%,100% { box-shadow: 0 0 0 0 rgba(245,183,49,0.4); } 50% { box-shadow: 0 0 0 6px rgba(245,183,49,0); } }
  .step-text { flex: 1; }
  .step-title { font-size: 14px; font-weight: 700; color: #1e293b; }
  .step-sub { font-size: 12px; color: #94a3b8; margin-top: 1px; }
  .step-title.muted { color: #94a3b8; }

  /* ì „ìì˜ìˆ˜ì¦ */
  .receipt-card {
    margin: 0 16px 12px;
    background: #fff;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 2px 12px rgba(0,0,0,0.06);
    border: 1px solid #e2e8f0;
  }
  .receipt-header {
    background: var(--navy);
    padding: 16px 18px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .receipt-title { font-size: 15px; font-weight: 700; color: #fff; }
  .receipt-badge { background: var(--gold); color: #1a1d2b; font-size: 10px; font-weight: 800; padding: 2px 8px; border-radius: 4px; margin-left: auto; }
  .receipt-rows { padding: 4px 0; }
  .receipt-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 18px;
    border-bottom: 1px solid #f8fafc;
  }
  .receipt-row:last-child { border-bottom: none; }
  .receipt-label { font-size: 13px; color: #64748b; }
  .receipt-value { font-size: 14px; font-weight: 700; color: #1e293b; }
  .receipt-total {
    background: #f8fafc;
    padding: 14px 18px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-top: 2px solid #e2e8f0;
  }
  .receipt-total-label { font-size: 14px; font-weight: 700; color: #1e293b; }
  .receipt-total-value {
    font-family: 'Outfit', sans-serif;
    font-size: 22px;
    font-weight: 800;
    color: var(--navy);
  }

  /* ì´ˆê³¼ìš”ê¸ˆ ê²½ê³  */
  .overtime-warning {
    margin: 0 16px 12px;
    background: var(--error-bg);
    border: 1px solid #fca5a5;
    border-radius: 12px;
    padding: 14px 16px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .overtime-text { flex: 1; }
  .overtime-title { font-size: 14px; font-weight: 700; color: var(--error); }
  .overtime-sub { font-size: 12px; color: #f87171; margin-top: 2px; }

  /* ê²°ì œ ëª¨ë‹¬ */
  .modal-overlay {
    display: none;
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.5);
    z-index: 200;
    backdrop-filter: blur(4px);
    align-items: flex-end;
    justify-content: center;
  }
  .modal-overlay.open { display: flex; }
  .modal-sheet {
    background: #fff;
    border-radius: 24px 24px 0 0;
    padding: 20px 20px 32px;
    width: 100%;
    max-width: 420px;
    animation: slide-up 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  @keyframes slide-up { from { transform: translateY(100%); } to { transform: translateY(0); } }
  .modal-handle { width: 40px; height: 4px; background: #e2e8f0; border-radius: 2px; margin: 0 auto 20px; }
  .modal-title { font-size: 18px; font-weight: 800; color: #1e293b; margin-bottom: 4px; }
  .modal-sub { font-size: 14px; color: #64748b; margin-bottom: 20px; }
  .amount-display {
    background: #f8fafc;
    border-radius: 12px;
    padding: 16px;
    text-align: center;
    margin-bottom: 16px;
  }
  .amount-label { font-size: 12px; color: #94a3b8; margin-bottom: 4px; }
  .amount-value { font-family: 'Outfit', sans-serif; font-size: 32px; font-weight: 800; color: var(--navy); }
  .pay-methods { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 16px; }
  .pay-method {
    background: #f8fafc;
    border: 1.5px solid #e2e8f0;
    border-radius: 10px;
    padding: 10px 4px;
    text-align: center;
    font-size: 11px;
    font-weight: 600;
    color: #475569;
    cursor: pointer;
    transition: all 0.2s;
  }
  .pay-method.selected { border-color: var(--navy); background: #eff3ff; color: var(--navy); }
  .pay-method-icon { font-size: 18px; display: block; margin-bottom: 4px; }
  .modal-pay-btn {
    width: 100%;
    padding: 16px;
    background: var(--navy);
    color: #fff;
    border: none;
    border-radius: 14px;
    font-size: 16px;
    font-weight: 700;
    font-family: 'Noto Sans KR', sans-serif;
    cursor: pointer;
    box-shadow: 0 4px 14px rgba(20,40,160,0.35);
  }
  .modal-cancel { width: 100%; padding: 12px; background: none; border: none; font-size: 14px; color: #94a3b8; cursor: pointer; margin-top: 8px; font-family: 'Noto Sans KR', sans-serif; }

  /* ì „í™”ë²ˆí˜¸ ëª¨ë‹¬ */
  .phone-input-row {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
  }
  .phone-input {
    flex: 1;
    padding: 14px 16px;
    border: 1.5px solid #e2e8f0;
    border-radius: 12px;
    font-size: 16px;
    font-family: 'Outfit', sans-serif;
    font-weight: 600;
    color: #1e293b;
    outline: none;
    letter-spacing: 1px;
  }
  .phone-input:focus { border-color: var(--navy); }
  .privacy-note {
    background: #f8fafc;
    border-radius: 10px;
    padding: 10px 12px;
    font-size: 11px;
    color: #64748b;
    margin-bottom: 16px;
    line-height: 1.6;
  }
  .privacy-note strong { color: var(--navy); }

  /* í•˜ë‹¨ ì •ë³´ */
  .footer-info {
    margin: 0 16px 20px;
    padding: 14px 16px;
    background: #f8fafc;
    border-radius: 12px;
    border: 1px solid #e2e8f0;
  }
  .footer-fee-title { font-size: 12px; font-weight: 700; color: #475569; margin-bottom: 8px; display: flex; align-items: center; gap: 4px; }
  .footer-fee-row { display: flex; justify-content: space-between; font-size: 12px; color: #64748b; padding: 3px 0; }
  .footer-fee-row span:last-child { font-weight: 600; color: #1e293b; }
  .footer-divider { height: 1px; background: #e2e8f0; margin: 8px 0; }
  .footer-corp { font-size: 11px; color: #94a3b8; text-align: center; line-height: 1.6; }
  .footer-corp a { color: var(--navy); font-weight: 600; text-decoration: none; }

  /* ì™„ë£Œ ìƒíƒœ */
  .complete-check {
    margin: 20px 16px 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 24px 16px;
    background: var(--success-bg);
    border-radius: 20px;
    border: 1px solid #bbf7d0;
  }
  .check-circle {
    width: 64px; height: 64px;
    background: var(--success);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 30px;
    margin-bottom: 12px;
    animation: pop-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  @keyframes pop-in { from { transform: scale(0); } to { transform: scale(1); } }
  .check-title { font-size: 18px; font-weight: 800; color: var(--success); margin-bottom: 4px; }
  .check-sub { font-size: 13px; color: #4ade80; }

  /* ìˆ¨ê¹€ ì²˜ë¦¬ */
  .hidden { display: none !important; }
</style>
</head>
<body>

<!-- ë°ëª¨ ìƒíƒœ ì»¨íŠ¸ë¡¤ -->
<div class="demo-bar">
  <div class="demo-label">ğŸ› ìƒíƒœ ì‹œë®¬ë ˆì´í„°</div>
  <div class="demo-states">
    <button class="state-btn active" onclick="setState('parking')">ğŸš— ì…ì°¨ ì¤‘</button>
    <button class="state-btn" onclick="setState('pre_paid')">âœ… ì‚¬ì „ì •ì‚°ì™„ë£Œ</button>
    <button class="state-btn" onclick="setState('overtime')">âš ï¸ 30ë¶„ì´ˆê³¼</button>
    <button class="state-btn" onclick="setState('exit_requested')">ğŸ”” ì¶œì°¨ìš”ì²­</button>
    <button class="state-btn" onclick="setState('car_ready')">ğŸš™ ì°¨ëŸ‰ì¤€ë¹„ì™„ë£Œ</button>
    <button class="state-btn" onclick="setState('completed')">ğŸ‰ ì¶œì°¨ì™„ë£Œ</button>
  </div>
</div>

<!-- í° í”„ë ˆì„ -->
<div class="phone-frame">
  <div class="phone-screen">
    <div class="phone-notch"><div class="notch-pill"></div></div>

    <div class="app-content" id="appContent">

      <!-- í—¤ë” -->
      <div class="ticket-header">
        <div class="header-logo">
          <div class="logo-mark">
            <span class="logo-mark-p">P</span>
            <span class="logo-mark-bar"></span>
          </div>
          <div class="logo-text">
            <span class="logo-mipak">ë¯¸íŒ</span>
            <span class="logo-ticket-text">Ticket</span>
          </div>
        </div>
        <div class="header-store">
          <div class="store-name-label">ğŸ“ ë°©ë¬¸ ë§¤ì¥</div>
          <div class="store-name-text">ê°•ì„œí‘¸ë¥¸ê¿ˆì„±ëª¨ì–´ë¦°ì´ë³‘ì›</div>
          <div class="plate-badge">
            <span class="plate-icon">ğŸš—</span>
            <span class="plate-number">12ê°€ 3456</span>
          </div>
        </div>
      </div>

      <!-- ìƒíƒœ ë°°ë„ˆ -->
      <div class="status-banner" id="statusBanner">
        <div class="status-icon" id="statusIcon"></div>
        <div>
          <div class="status-text" id="statusText"></div>
          <div class="status-sub" id="statusSub"></div>
        </div>
      </div>

      <!-- ì…ì°¨ì¤‘ ì´ˆê³¼ ê²½ê³  -->
      <div class="overtime-warning hidden" id="overtimeWarning">
        <span style="font-size:22px; animation: pulse-red 1s infinite;">âš ï¸</span>
        <div class="overtime-text">
          <div class="overtime-title">ì‚¬ì „ì •ì‚° 30ë¶„ ì´ˆê³¼!</div>
          <div class="overtime-sub">ì¶”ê°€ìš”ê¸ˆì´ ë°œìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ì œí•´ì£¼ì„¸ìš”.</div>
        </div>
      </div>

      <!-- ì‚¬ì „ì •ì‚° ì™„ë£Œ ì¹´ìš´íŠ¸ë‹¤ìš´ -->
      <div class="countdown-box hidden" id="countdownBox">
        <div class="countdown-label">âœ… ì‚¬ì „ì •ì‚° ì™„ë£Œ â€” ìœ ì˜ˆì‹œê°„</div>
        <div class="countdown-timer" id="countdownTimer">28:47</div>
        <div class="countdown-sub">ì´ ì‹œê°„ ë‚´ ì¶œì°¨ ì‹œ ì¶”ê°€ìš”ê¸ˆ ì—†ìŒ</div>
      </div>

      <!-- ì¶œì°¨ ì§„í–‰ ìƒíƒœ -->
      <div class="exit-progress hidden" id="exitProgress">
        <div class="exit-step">
          <div class="step-dot done">âœ“</div>
          <div class="step-text">
            <div class="step-title">ì¶œì°¨ ìš”ì²­ ì ‘ìˆ˜</div>
            <div class="step-sub">14:52 â€” ìš”ì²­ì´ ì „ë‹¬ë˜ì—ˆìŠµë‹ˆë‹¤</div>
          </div>
        </div>
        <div class="exit-step" id="stepPreparing">
          <div class="step-dot active" id="stepDot2">ğŸ”„</div>
          <div class="step-text">
            <div class="step-title" id="stepTitle2">CREW ì°¨ëŸ‰ ì´ë™ ì¤‘</div>
            <div class="step-sub" id="stepSub2">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”</div>
          </div>
        </div>
        <div class="exit-step">
          <div class="step-dot pending" id="stepDot3">3</div>
          <div class="step-text">
            <div class="step-title muted" id="stepTitle3">ì°¨ëŸ‰ ì¤€ë¹„ ì™„ë£Œ ì•Œë¦¼</div>
            <div class="step-sub" id="stepSub3">ì™„ë£Œ ì‹œ ì¹´ì¹´ì˜¤í†¡ ì•Œë¦¼ ë°œì†¡</div>
          </div>
        </div>
      </div>

      <!-- ì°¨ëŸ‰ ì¤€ë¹„ì™„ë£Œ -->
      <div class="status-banner hidden" id="carReadyBanner" style="background:var(--success-bg); border:1px solid #bbf7d0; margin:12px 16px; border-radius:14px;">
        <div class="status-icon">ğŸš™</div>
        <div>
          <div class="status-text" style="color:var(--success)">ì°¨ëŸ‰ì´ ì¶œêµ¬ Aì— ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!</div>
          <div class="status-sub" style="color:#4ade80">ì§€ê¸ˆ ë°”ë¡œ ì¶œì°¨í•´ì£¼ì„¸ìš”</div>
        </div>
      </div>

      <!-- ì™„ë£Œ ì²´í¬ -->
      <div class="complete-check hidden" id="completeCheck">
        <div class="check-circle">âœ“</div>
        <div class="check-title">ì¶œì°¨ ì™„ë£Œ!</div>
        <div class="check-sub">ì´ìš©í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤</div>
      </div>

      <!-- ì „ìì˜ìˆ˜ì¦ -->
      <div class="receipt-card hidden" id="receiptCard">
        <div class="receipt-header">
          <span style="font-size:16px">ğŸ§¾</span>
          <span class="receipt-title">ì „ìì˜ìˆ˜ì¦</span>
          <span class="receipt-badge">ê²°ì œì™„ë£Œ</span>
        </div>
        <div class="receipt-rows">
          <div class="receipt-row"><span class="receipt-label">ì…ì°¨ì‹œê°„</span><span class="receipt-value">14:30</span></div>
          <div class="receipt-row"><span class="receipt-label">ì¶œì°¨ì‹œê°„</span><span class="receipt-value">17:02</span></div>
          <div class="receipt-row"><span class="receipt-label">ì£¼ì°¨ì‹œê°„</span><span class="receipt-value">2ì‹œê°„ 32ë¶„</span></div>
          <div class="receipt-row"><span class="receipt-label">ë°©ë¬¸ì§€ í• ì¸</span><span class="receipt-value" style="color:var(--success)">ë¬´ë£Œ 30ë¶„</span></div>
          <div class="receipt-row"><span class="receipt-label">ê²°ì œìˆ˜ë‹¨</span><span class="receipt-value">ì‚¼ì„±í˜ì´</span></div>
        </div>
        <div class="receipt-total">
          <span class="receipt-total-label">ì´ ê²°ì œê¸ˆì•¡</span>
          <span class="receipt-total-value">â‚©5,000</span>
        </div>
      </div>

      <!-- ì£¼ì°¨ ì‹œê°„ ì¹´ë“œ (ì…ì°¨ ì¤‘ì¼ ë•Œ) -->
      <div class="main-card" id="timerCard">
        <div class="card-header">â± ì£¼ì°¨ í˜„í™©</div>
        <div class="timer-display">
          <div class="timer-label" id="timerLabel">ì£¼ì°¨ ê²½ê³¼ ì‹œê°„</div>
          <div class="timer-value" id="timerValue">2:15:33</div>
        </div>
        <div class="fee-row">
          <div>
            <div class="fee-label">í˜„ì¬ ì˜ˆìƒ ìš”ê¸ˆ</div>
            <div class="fee-note" id="feeNote">ë¬´ë£Œì£¼ì°¨ 30ë¶„ ì ìš© ì™„ë£Œ</div>
          </div>
          <div style="text-align:right">
            <div class="fee-value highlight" id="feeValue">â‚©5,000</div>
          </div>
        </div>
        <div class="fee-row" style="border-bottom:none">
          <div class="fee-label">ì…ì°¨ì‹œê°„</div>
          <div style="font-size:13px; font-weight:600; color:#1e293b;">2026.02.22 14:30</div>
        </div>
      </div>

      <!-- ë°©ë¬¸ì§€ í• ì¸ -->
      <div class="visit-discount" id="visitDiscount">
        <span class="visit-icon">ğŸ¥</span>
        <div class="visit-info">
          <div class="visit-name">2ì¸µ ì†Œì•„ì²­ì†Œë…„ê³¼ ë°©ë¬¸</div>
          <div class="visit-detail">ë¬´ë£Œ 30ë¶„ + ê¸°ë³¸ 2,000ì› / ì¶”ê°€ 10ë¶„ë‹¹ 1,000ì›</div>
        </div>
      </div>

      <!-- ì•¡ì…˜ ë²„íŠ¼ë“¤ -->
      <div class="actions" id="actionBtns">
        <button class="btn-primary btn-pay" id="btnPay" onclick="openPayModal()">
          ğŸ’³ ì‚¬ì „ì •ì‚°í•˜ê¸°
          <span class="btn-pay-badge">ì‚¼ì„±í˜ì´ ê°€ëŠ¥</span>
        </button>
        <button class="btn-primary btn-exit" id="btnExit" onclick="openPhoneModal()">
          ğŸš™ ì¶œì°¨ìš”ì²­í•˜ê¸°
        </button>
        <button class="btn-primary btn-notify" id="btnNotify" onclick="openPhoneModal()">
          ğŸ”” ì¶œì°¨ ì•Œë¦¼ ë°›ê¸° (ì¹´ì¹´ì˜¤í†¡)
        </button>
      </div>

      <!-- í•˜ë‹¨ ìš”ê¸ˆ ì •ë³´ -->
      <div class="footer-info" id="footerInfo">
        <div class="footer-fee-title">ğŸ“‹ ìš”ê¸ˆ ì•ˆë‚´</div>
        <div class="footer-fee-row"><span>ë¬´ë£Œ ì£¼ì°¨</span><span>ìµœì´ˆ 30ë¶„</span></div>
        <div class="footer-fee-row"><span>ê¸°ë³¸ìš”ê¸ˆ</span><span>2,000ì›</span></div>
        <div class="footer-fee-row"><span>ì¶”ê°€ ìš”ê¸ˆ</span><span>10ë¶„ë‹¹ 1,000ì›</span></div>
        <div class="footer-fee-row"><span>ì¼ ìµœëŒ€ìš”ê¸ˆ</span><span>15,000ì›</span></div>
        <div class="footer-divider"></div>
        <div class="footer-corp">
          ì£¼ì‹íšŒì‚¬ ë¯¸ìŠ¤í„°íŒ Â· ì‚¬ì—…ìë²ˆí˜¸ 123-45-67890<br>
          â˜ <a href="tel:18991871">1899-1871</a> Â· mepark@mrpark.co.kr
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ê²°ì œ ëª¨ë‹¬ -->
<div class="modal-overlay" id="payModal">
  <div class="modal-sheet">
    <div class="modal-handle"></div>
    <div class="modal-title">ì‚¬ì „ì •ì‚°</div>
    <div class="modal-sub">ì§€ê¸ˆ ê²°ì œí•˜ë©´ 30ë¶„ ìœ ì˜ˆì‹œê°„ì´ ì£¼ì–´ì§‘ë‹ˆë‹¤</div>
    <div class="amount-display">
      <div class="amount-label">ê²°ì œ ê¸ˆì•¡</div>
      <div class="amount-value">â‚©5,000</div>
    </div>
    <div class="pay-methods">
      <div class="pay-method selected" onclick="selectMethod(this)">
        <span class="pay-method-icon">ğŸ’³</span>ì¹´ë“œ
      </div>
      <div class="pay-method" onclick="selectMethod(this)">
        <span class="pay-method-icon">ğŸ“±</span>ì‚¼ì„±í˜ì´
      </div>
      <div class="pay-method" onclick="selectMethod(this)">
        <span class="pay-method-icon">ğŸ’›</span>ì¹´ì¹´ì˜¤í˜ì´
      </div>
      <div class="pay-method" onclick="selectMethod(this)">
        <span class="pay-method-icon">ğŸ’š</span>ë„¤ì´ë²„í˜ì´
      </div>
    </div>
    <button class="modal-pay-btn" onclick="processPayment()">ğŸ’³ ê²°ì œí•˜ê¸°</button>
    <button class="modal-cancel" onclick="closeModal('payModal')">ì·¨ì†Œ</button>
  </div>
</div>

<!-- ì „í™”ë²ˆí˜¸ ëª¨ë‹¬ -->
<div class="modal-overlay" id="phoneModal">
  <div class="modal-sheet">
    <div class="modal-handle"></div>
    <div class="modal-title">ì¶œì°¨ ì•Œë¦¼ ë°›ê¸°</div>
    <div class="modal-sub">ì°¨ëŸ‰ì´ ì¤€ë¹„ë˜ë©´ ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤</div>
    <div class="phone-input-row">
      <input class="phone-input" type="tel" placeholder="010-0000-0000" id="phoneInput" maxlength="13">
    </div>
    <div class="privacy-note">
      ğŸ”’ ì „í™”ë²ˆí˜¸ëŠ” ì•Œë¦¼ ë°œì†¡ ì¦‰ì‹œ ì‚­ì œë˜ë©° <strong>ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</strong><br>
      ê°œì¸ì •ë³´ ìµœì†Œ ìˆ˜ì§‘ ì›ì¹™ì— ë”°ë¼ DBì— ê¸°ë¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    </div>
    <button class="modal-pay-btn" onclick="submitPhone()">ğŸ“© ì•Œë¦¼ ì‹ ì²­</button>
    <button class="modal-cancel" onclick="closeModal('phoneModal')">ì·¨ì†Œ</button>
  </div>
</div>

<script>
let currentState = 'parking';
let timerInterval = null;
let countdownInterval = null;
let seconds = 8133; // 2ì‹œê°„ 15ë¶„ 33ì´ˆ
let countdownSeconds = 1727; // 28ë¶„ 47ì´ˆ

// ìƒíƒœ ì„¤ì •
function setState(state) {
  currentState = state;
  document.querySelectorAll('.state-btn').forEach(btn => btn.classList.remove('active'));
  event.target.classList.add('active');
  renderState();
}

function renderState() {
  clearInterval(timerInterval);
  clearInterval(countdownInterval);

  // ëª¨ë“  ìš”ì†Œ ì´ˆê¸°í™”
  const els = {
    statusBanner: document.getElementById('statusBanner'),
    overtimeWarning: document.getElementById('overtimeWarning'),
    countdownBox: document.getElementById('countdownBox'),
    exitProgress: document.getElementById('exitProgress'),
    carReadyBanner: document.getElementById('carReadyBanner'),
    completeCheck: document.getElementById('completeCheck'),
    receiptCard: document.getElementById('receiptCard'),
    timerCard: document.getElementById('timerCard'),
    visitDiscount: document.getElementById('visitDiscount'),
    actionBtns: document.getElementById('actionBtns'),
    footerInfo: document.getElementById('footerInfo'),
    timerValue: document.getElementById('timerValue'),
    timerLabel: document.getElementById('timerLabel'),
    feeValue: document.getElementById('feeValue'),
    feeNote: document.getElementById('feeNote'),
    statusIcon: document.getElementById('statusIcon'),
    statusText: document.getElementById('statusText'),
    statusSub: document.getElementById('statusSub'),
    btnPay: document.getElementById('btnPay'),
    btnExit: document.getElementById('btnExit'),
    btnNotify: document.getElementById('btnNotify'),
  };

  // ì „ë¶€ ìˆ¨ê¸°ê¸°
  Object.values(els).forEach(el => el && el.classList.add('hidden'));

  // ìƒíƒœë³„ í‘œì‹œ
  els.statusBanner.classList.remove('hidden');
  els.statusBanner.style.cssText = '';

  switch(currentState) {
    case 'parking':
      setBanner(els, '#eff3ff', '#bfdbfe', 'ğŸŸ¢', 'ì…ì°¨ ì™„ë£Œ â€” ì£¼ì°¨ ì¤‘', 'ì‹¤ì‹œê°„ìœ¼ë¡œ ìš”ê¸ˆì´ ê³„ì‚°ë©ë‹ˆë‹¤', 'var(--navy)', '#60a5fa');
      show(els, ['timerCard','visitDiscount','actionBtns','footerInfo']);
      els.timerValue.className = 'timer-value';
      els.feeValue.textContent = 'â‚©5,000';
      startTimer(els.timerValue);
      startFeeUpdate(els.feeValue);
      break;

    case 'pre_paid':
      setBanner(els, 'var(--success-bg)', '#bbf7d0', 'âœ…', 'ì‚¬ì „ì •ì‚° ì™„ë£Œ!', '30ë¶„ ì´ë‚´ ì¶œì°¨í•´ì£¼ì„¸ìš”', 'var(--success)', '#4ade80');
      show(els, ['countdownBox','timerCard','visitDiscount','actionBtns','footerInfo']);
      els.timerValue.className = 'timer-value pre-paid';
      els.timerLabel.textContent = 'ì£¼ì°¨ ê²½ê³¼ ì‹œê°„';
      els.feeValue.textContent = 'â‚©5,000';
      els.feeNote.textContent = 'ê²°ì œ ì™„ë£Œ âœ“';
      els.btnPay.classList.add('hidden');
      els.btnExit.classList.add('hidden');
      els.btnNotify.classList.remove('hidden');
      countdownSeconds = 1727;
      startCountdown();
      startTimer(els.timerValue);
      break;

    case 'overtime':
      setBanner(els, 'var(--error-bg)', '#fca5a5', 'âš ï¸', 'ì¶”ê°€ìš”ê¸ˆ ë°œìƒ ì¤‘', 'ì¦‰ì‹œ ê²°ì œí•´ì£¼ì„¸ìš”', 'var(--error)', '#f87171');
      show(els, ['overtimeWarning','timerCard','visitDiscount','actionBtns','footerInfo']);
      els.timerValue.className = 'timer-value overtime';
      els.timerLabel.textContent = 'ì´ˆê³¼ ì‹œê°„';
      els.feeValue.textContent = 'â‚©2,000';
      els.feeNote.textContent = 'âš ï¸ ì¶”ê°€ 10ë¶„ë‹¹ 1,000ì›';
      els.btnExit.classList.add('hidden');
      els.btnNotify.classList.add('hidden');
      startTimer(els.timerValue, true);
      startFeeUpdate(els.feeValue, true);
      break;

    case 'exit_requested':
      setBanner(els, 'var(--warning-bg)', '#fed7aa', 'ğŸ””', 'ì¶œì°¨ ìš”ì²­ ì ‘ìˆ˜ë¨', 'CREWê°€ ì°¨ëŸ‰ì„ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤', 'var(--warning)', '#fb923c');
      show(els, ['exitProgress','timerCard','footerInfo']);
      document.getElementById('stepDot2').textContent = 'ğŸ”„';
      document.getElementById('stepTitle2').textContent = 'CREW ì°¨ëŸ‰ ì´ë™ ì¤‘';
      document.getElementById('stepSub2').textContent = 'ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”';
      document.getElementById('stepDot2').className = 'step-dot active';
      document.getElementById('stepDot3').className = 'step-dot pending';
      document.getElementById('stepTitle3').className = 'step-title muted';
      els.timerLabel.textContent = 'ì£¼ì°¨ ê²½ê³¼ ì‹œê°„';
      els.timerValue.className = 'timer-value';
      els.feeValue.textContent = 'â‚©5,000';
      startTimer(els.timerValue);
      break;

    case 'car_ready':
      setBanner(els, '#eff3ff', '#bfdbfe', 'ğŸš™', 'ì°¨ëŸ‰ì´ ì¶œêµ¬ Aì— ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!', 'ì§€ê¸ˆ ë°”ë¡œ ì¶œì°¨í•´ì£¼ì„¸ìš”', 'var(--navy)', '#60a5fa');
      show(els, ['exitProgress','carReadyBanner','actionBtns','footerInfo']);
      document.getElementById('stepDot2').textContent = 'âœ“';
      document.getElementById('stepDot2').className = 'step-dot done';
      document.getElementById('stepDot3').textContent = 'âœ“';
      document.getElementById('stepDot3').className = 'step-dot done';
      document.getElementById('stepTitle2').textContent = 'ì°¨ëŸ‰ ì´ë™ ì™„ë£Œ';
      document.getElementById('stepSub2').textContent = '14:58 â€” ì¶œêµ¬ Aì— ë°°ì¹˜ë¨';
      document.getElementById('stepTitle3').textContent = 'ì¹´ì¹´ì˜¤í†¡ ì•Œë¦¼ ë°œì†¡ ì™„ë£Œ';
      document.getElementById('stepTitle3').className = 'step-title';
      document.getElementById('stepSub3').textContent = '14:59 â€” ì•Œë¦¼ ë°œì†¡ í›„ ë²ˆí˜¸ ì¦‰ì‹œ ì‚­ì œ';
      els.statusBanner.classList.add('hidden');
      els.btnPay.classList.remove('hidden');
      els.btnPay.textContent = 'ğŸ’³ í˜„ì¥ ê²°ì œí•˜ê¸°';
      els.btnExit.classList.add('hidden');
      els.btnNotify.classList.add('hidden');
      break;

    case 'completed':
      setBanner(els, 'var(--success-bg)', '#bbf7d0', 'ğŸ‰', 'ì¶œì°¨ ì™„ë£Œ!', 'ì´ìš©í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤', 'var(--success)', '#4ade80');
      show(els, ['completeCheck','receiptCard','footerInfo']);
      els.statusBanner.classList.add('hidden');
      break;
  }
}

function setBanner(els, bg, border, icon, text, sub, textColor, subColor) {
  els.statusBanner.style.background = bg;
  els.statusBanner.style.border = `1px solid ${border}`;
  els.statusBanner.style.margin = '12px 16px';
  els.statusBanner.style.borderRadius = '14px';
  els.statusIcon.textContent = icon;
  els.statusText.textContent = text;
  els.statusText.style.color = textColor;
  els.statusSub.textContent = sub;
  els.statusSub.style.color = subColor;
}

function show(els, keys) {
  keys.forEach(k => els[k] && els[k].classList.remove('hidden'));
}

function startTimer(el, isOvertime = false) {
  let s = isOvertime ? 0 : seconds;
  el.textContent = formatTime(s);
  timerInterval = setInterval(() => {
    s++;
    el.textContent = formatTime(s);
    if (!isOvertime) seconds = s;
  }, 1000);
}

function startFeeUpdate(el, isOvertime = false) {
  let base = isOvertime ? 1000 : 5000;
  setInterval(() => {
    if (isOvertime) {
      base = 1000 + Math.floor(Math.random() * 2000);
    }
  }, 60000);
}

function startCountdown() {
  const el = document.getElementById('countdownTimer');
  let s = countdownSeconds;
  el.textContent = formatTime(s, true);
  el.className = s < 300 ? 'countdown-timer urgent' : 'countdown-timer';
  countdownInterval = setInterval(() => {
    s--;
    if (s < 0) { clearInterval(countdownInterval); setState('overtime'); return; }
    el.textContent = formatTime(s, true);
    el.className = s < 300 ? 'countdown-timer urgent' : 'countdown-timer';
  }, 1000);
}

function formatTime(s, compact = false) {
  const h = Math.floor(s / 3600);
  const m = Math.floor((s % 3600) / 60);
  const sec = s % 60;
  if (compact || h === 0) return `${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;
  return `${h}:${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;
}

function openPayModal() { document.getElementById('payModal').classList.add('open'); }
function openPhoneModal() { document.getElementById('phoneModal').classList.add('open'); }
function closeModal(id) { document.getElementById(id).classList.remove('open'); }
function selectMethod(el) { document.querySelectorAll('.pay-method').forEach(e => e.classList.remove('selected')); el.classList.add('selected'); }
function processPayment() {
  closeModal('payModal');
  setState('pre_paid');
  document.querySelectorAll('.state-btn').forEach((btn,i) => { if(i===1) btn.classList.add('active'); else btn.classList.remove('active'); });
}
function submitPhone() {
  closeModal('phoneModal');
  const input = document.getElementById('phoneInput').value;
  if (input.length > 5) { alert('ğŸ“© ì¹´ì¹´ì˜¤í†¡ ì•Œë¦¼ì„ ì‹ ì²­í–ˆìŠµë‹ˆë‹¤.\nì „í™”ë²ˆí˜¸ëŠ” ë°œì†¡ ì¦‰ì‹œ ì‚­ì œë©ë‹ˆë‹¤.'); }
}

// ì „í™”ë²ˆí˜¸ ìë™ í•˜ì´í”ˆ
document.getElementById('phoneInput').addEventListener('input', function(e) {
  let v = e.target.value.replace(/\D/g,'');
  if (v.length > 3 && v.length <= 7) v = v.slice(0,3)+'-'+v.slice(3);
  else if (v.length > 7) v = v.slice(0,3)+'-'+v.slice(3,7)+'-'+v.slice(7,11);
  e.target.value = v;
});

// ì´ˆê¸° ë Œë”ë§
renderState();
</script>
</body>
</html>
