# 📋 2026.2.20 (목) TODO — 모바일 최적화 + 미완료 작업

## 🔴 긴급 (Supabase SQL 실행 필요)

### 1. 기존 parking_lots org_id 채우기
```sql
UPDATE parking_lots pl
SET org_id = s.org_id
FROM stores s
WHERE pl.store_id = s.id
AND pl.org_id IS NULL;
```

### 2. daily_records 컬럼 추가
```sql
ALTER TABLE daily_records ADD COLUMN IF NOT EXISTS day_type text DEFAULT 'weekday';
ALTER TABLE daily_records ADD COLUMN IF NOT EXISTS is_holiday boolean DEFAULT false;
```

---

## 📱 모바일 최적화 (메인 작업)

### 현재 모바일 대응 상태
| 페이지 | PC 대응 | 모바일 대응 | 상태 |
|--------|---------|------------|------|
| 대시보드 /dashboard | ✅ | ❌ 미대응 | 🔴 |
| 데이터 입력 /entry | ✅ | ✅ 완료 | ✅ |
| 입차 현황 /parking-status | ✅ | ⚠️ 기본 | 🟡 |
| 월주차 관리 /monthly | ✅ | ❌ 미대응 | 🔴 |
| 매출 분석 /analytics | ✅ | ❌ 미대응 | 🔴 |
| 근무자 관리 /workers | ✅ | ✅ 완료 | ✅ |
| 매장 관리 /stores | ✅ | ⚠️ 기본 | 🟡 |
| 팀원 초대 /team | ✅ | ✅ 완료 | ✅ |
| 사고보고 /accident | ✅ | ❌ 미대응 | 🔴 |
| 설정 /settings | ✅ | ❌ 미대응 | 🔴 |
| 기능안내 /guide | ✅ | ❌ 미대응 | 🔴 |
| 로그인 /login | ✅ | ⚠️ 기본 | 🟡 |

### 🔴 우선순위 1: 대시보드 모바일
- [ ] KPI 카드: 4열 → 2열 그리드 (모바일)
- [ ] 주차장 현황: 매장 탭 가로 스크롤, 카드 1열로
- [ ] 차트: 높이 축소, 폰트 크기 축소
- [ ] 마감미정산: 풀 너비
- [ ] 전체 패딩/마진 모바일용 축소

### 🔴 우선순위 2: 매출 분석 모바일
- [ ] 기간 탭: 가로 스크롤 또는 줄바꿈
- [ ] KPI 카드: 2열
- [ ] 차트: 반응형 높이
- [ ] 테이블: 가로 스크롤

### 🔴 우선순위 3: 월주차 관리 모바일
- [ ] 목록: PC 테이블 → 모바일 카드형
- [ ] 등록 폼: 1열 스택
- [ ] 검색/필터: 세로 스택

### 🔴 우선순위 4: 사고보고 모바일
- [ ] 사고 목록: 카드형
- [ ] 사고 등록 폼: 1열 스택

### 🟡 우선순위 5: 매장 관리 모바일 개선
- [ ] 매장 목록 카드 크기 최적화
- [ ] 주차장 카드 1열
- [ ] 운영시간 입력 폼 가로 → 세로

### 🟡 우선순위 6: 설정/기능안내 모바일
- [ ] 설정 메뉴 카드 크기 최적화
- [ ] 기능안내: 그리드 1열

### 🟡 우선순위 7: 로그인 모바일
- [ ] 로고+폼 세로 스택 중앙 정렬
- [ ] 입력 필드 풀 너비

---

## 🔧 기능 보완 작업

### 출퇴근-근태 연동 강화
- [ ] 출퇴근 탭에서 출근/퇴근 기록 시 worker_attendance에 자동 반영
- [ ] 출퇴근 탭에서 매장별 필터 추가 (현재는 전체만)
- [ ] 출퇴근 탭: 오늘 날짜 + 출근/퇴근 시간 입력 → worker_attendance INSERT/UPDATE

### 대시보드 데이터 검증
- [ ] parking_lots org_id SQL 실행 후 주차장 현황 표시 확인
- [ ] 강서푸른꿈 / 강원빌딩 등 주차장 데이터 정상 표시 확인

### 공휴일 보너스 계산
- [ ] daily_records의 is_holiday 기반 보너스 계산 로직 (설정 페이지?)
- [ ] 근태 엑셀에 공휴일 근무일수 별도 표시

---

## 📐 모바일 공통 패턴 (적용 가이드)

### 반응형 브레이크포인트
```
모바일: < 768px (md 미만)
PC: >= 768px (md 이상)
```

### 공통 패턴
```tsx
{/* PC: 테이블 */}
<div className="hidden md:block">
  <table>...</table>
</div>

{/* 모바일: 카드 */}
<div className="md:hidden space-y-2">
  {items.map(item => (
    <div className="rounded-xl p-3 border">...</div>
  ))}
</div>
```

### 그리드 반응형
```tsx
{/* PC 4열 → 모바일 2열 */}
<div className="grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-5">

{/* PC 2열 → 모바일 1열 */}
<div className="grid grid-cols-1 md:grid-cols-2 gap-4">
```

### 패딩/폰트 반응형
```tsx
style={{
  padding: "16px",        // 모바일
  // md 이상은 className으로
}}
className="p-4 md:p-7"   // 모바일 16px → PC 28px
className="text-sm md:text-base"
```

---

## ⏰ 작업 순서 제안

1. **SQL 실행** (5분) — parking_lots org_id + daily_records 컬럼
2. **대시보드 모바일** (1시간) — 가장 많이 보는 페이지
3. **매출 분석 모바일** (30분)
4. **월주차 관리 모바일** (30분)
5. **사고보고 모바일** (20분)
6. **매장 관리 모바일 개선** (20분)
7. **설정/기능안내/로그인 모바일** (20분)
8. **출퇴근-근태 연동 강화** (30분)
9. **전체 테스트** (30분)
